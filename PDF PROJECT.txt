PART 1 — FRONTEND (React)

This is a working responsive PDF editor with drag, resize, and percentage-based coordinates.

Frontend Stack

React

react-pdf

react-rnd

src/App.jsx
import { useState } from "react"
import { Document, Page, pdfjs } from "react-pdf"
import { Rnd } from "react-rnd"

pdfjs.GlobalWorkerOptions.workerSrc =
  `https://unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.js`

export default function App() {
  const [box, setBox] = useState({
    xPercent: 0.3,
    yPercent: 0.3,
    wPercent: 0.25,
    hPercent: 0.1
  })

  const [pageSize, setPageSize] = useState({ width: 1, height: 1 })

  function onRenderSuccess(page) {
    setPageSize({
      width: page.width,
      height: page.height
    })
  }

  function updateBox(x, y, w, h) {
    setBox({
      xPercent: x / pageSize.width,
      yPercent: y / pageSize.height,
      wPercent: w / pageSize.width,
      hPercent: h / pageSize.height
    })
  }

  return (
    <div style={{ padding: 20 }}>
      <Document file="/sample.pdf">
        <Page pageNumber={1} onRenderSuccess={onRenderSuccess} />
      </Document>

      <Rnd
        bounds="parent"
        size={{
          width: box.wPercent * pageSize.width,
          height: box.hPercent * pageSize.height
        }}
        position={{
          x: box.xPercent * pageSize.width,
          y: box.yPercent * pageSize.height
        }}
        onDragStop={(e, d) =>
          updateBox(d.x, d.y,
            box.wPercent * pageSize.width,
            box.hPercent * pageSize.height)
        }
        onResizeStop={(e, dir, ref, delta, pos) =>
          updateBox(
            pos.x,
            pos.y,
            ref.offsetWidth,
            ref.offsetHeight
          )
        }
        style={{
          border: "2px dashed #2563eb",
          background: "rgba(37,99,235,0.1)"
        }}
      />
    </div>
  )
}

Why this works

All coordinates are stored as percentages

Resize + drag always recalculates ratios

Switching to mobile keeps placement correct

PART 2 — BACKEND (Node + Express)

This backend:

Receives percentage coordinates

Converts them to PDF points

Preserves aspect ratio

Burns signature into PDF

Generates SHA-256 hashes

Backend Stack

Node.js

Express

pdf-lib

crypto

server.js
import express from "express"
import fs from "fs"
import crypto from "crypto"
import { PDFDocument } from "pdf-lib"

const app = express()
app.use(express.json({ limit: "10mb" }))

function sha256(buffer) {
  return crypto.createHash("sha256").update(buffer).digest("hex")
}

app.post("/sign-pdf", async (req, res) => {
  const { signatureBase64, field } = req.body

  const originalPdf = fs.readFileSync("./sample.pdf")
  const originalHash = sha256(originalPdf)

  const pdfDoc = await PDFDocument.load(originalPdf)
  const page = pdfDoc.getPage(field.page)

  const pageWidth = page.getWidth()
  const pageHeight = page.getHeight()

  const boxWidth = field.wPercent * pageWidth
  const boxHeight = field.hPercent * pageHeight

  const x = field.xPercent * pageWidth
  const y =
    pageHeight - ((field.yPercent + field.hPercent) * pageHeight)

  const imageBytes = Buffer.from(
    signatureBase64.split(",")[1],
    "base64"
  )

  const image = await pdfDoc.embedPng(imageBytes)

  const scale = Math.min(
    boxWidth / image.width,
    boxHeight / image.height
  )

  const drawWidth = image.width * scale
  const drawHeight = image.height * scale

  const drawX = x + (boxWidth - drawWidth) / 2
  const drawY = y + (boxHeight - drawHeight) / 2

  page.drawImage(image, {
    x: drawX,
    y: drawY,
    width: drawWidth,
    height: drawHeight
  })

  const signedPdf = await pdfDoc.save()
  const signedHash = sha256(signedPdf)

  fs.writeFileSync("./signed.pdf", signedPdf)

  res.json({
    signedPdfUrl: "/signed.pdf",
    audit: {
      originalHash,
      signedHash
    }
  })
})

app.listen(3001, () => {
  console.log("Backend running on port 3001")
})

